---

env:
  global:
    - CI=travis
    - IS_CI=true
    - E2E_CLEANUP=true
    # - PROVIDER="kubernaut"
    - PROVIDER="k3d"
    # PUSH_CHART must be != "false" for pushing the chart
    - PUSH_CHART="false"

install:
  - export PATH=~/bin:$PATH
  - source ~/.gimme/envs/latest.env
  - ./ci/install.sh
  - ./ci/provider.sh setup
  - ./ci/provider.sh create

language: generic

branches:
  only:
  - master
  - /^v.*$/
  - ci-test

script: 
  - ./ci/run_test.sh
  - ./ci/push_chart.sh

after_script:
  - ./ci/provider.sh delete


